<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Version 5.0 of the Documentation theme for Jekyll changes some fundamental ways the theme works to provide product-specific sidebars, intended to accommodate...">
<meta name="keywords" content=" release notes, announcements, what's new, new features">
<title>Collector 설치  | Jekyll theme for designers</title>
<link rel="stylesheet" href="/documentation-theme-jekyll/css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/documentation-theme-jekyll/css/modern-business.css">
<link rel="stylesheet" href="/documentation-theme-jekyll/css/lavish-bootstrap.css">
<link rel="stylesheet" href="/documentation-theme-jekyll/css/customstyles.css">
<link rel="stylesheet" href="/documentation-theme-jekyll/css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/documentation-theme-jekyll/js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="/documentation-theme-jekyll/js/toc.js"></script>
<script src="/documentation-theme-jekyll/js/customscripts.js"></script>

<link rel="shortcut icon" href="/documentation-theme-jekyll/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://idratherbewriting.com/documentation-theme-jekyll/feed.xml">




 
    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="/documentation-theme-jekyll/">&nbsp;<span class="projectTitle"> N3N Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">WIZEYE<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li class="dropdownActive"><a href="/documentation-theme-jekyll/">WIZEYE1.5.4</a></li>
                        
                        
                        
                        <li><a href="http://doc.n3n.co.kr" target="_blank">Manual Download</a></li>
                        
                        
                    </ul>
                </li>
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">INNOWATCH<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li class="dropdownActive"><a href="/documentation-theme-jekyll/">INNOWATCH 3.0.4</a></li>
                        
                        
                        
                        <li><a href="http://doc.n3n.co.kr" target="_blank">Manual Download</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<!-- Send feedback function -->
<script>
function SendLinkByMail(href) {
var subject= "Jekyll theme for designers feedback";
var body = "I have some feedback about the Collector 설치 page: ";
body += window.location.href;
body += "";
var uri = "mailto:angel02@n3n.co.kr?subject=";
uri += encodeURIComponent(subject);
uri += "&body=";
uri += encodeURIComponent(body);
window.location.href = uri;
}
</script>

<li><a href="javascript:(function()%7BSendLinkByMail()%3B%7D)()%3B" target="_blank"><i class="fa fa-envelope-o"></i> Feedback</a></li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/documentation-theme-jekyll/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/documentation-theme-jekyll/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Collector 설치">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>
<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          












<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">WIZEYE 1.5.4</li>
    
    
    
    <li>
        <a href="#">Operation</a>
        <ul>
            
            
            
            <li><a href="/documentation-theme-jekyll/">Quick Start</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_start/">WIZEYE 시작</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_login/">WIZEYE 접속 방법 및 로그인</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_layout_operation/">화면 구성 및 운영</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_user/">사용자 관리</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_VIEW/">VIEW 구성 및 운영</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_cell/">CELL 운영</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_reference/">Contents 생성</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_reference/">참조</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Installation</a>
        <ul>
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_before_install/">설치 전 준비</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_install/">설치</a></li>
            
            
            
            
            
            
            <li class="active"><a href="/documentation-theme-jekyll/mydoc_collector/">Collector 설치</a></li>
            
            
            
            
            
            
            <li><a href="/documentation-theme-jekyll/mydoc_Uninstall/">Uninstall</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>
    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Collector 설치</h1>
</div>



<div class="post-content">

   
    <div class="summary">Version 5.0 of the Documentation theme for Jekyll changes some fundamental ways the theme works to provide product-specific sidebars, intended to accommodate a site where multiple products are grouped together on the same site rather than generated out as separate outputs.</div>
   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

    

    

    <a target="_blank" href="https://github.com/tomjohnson1492/documentation-theme-jekyll/edit/reviews/mydoc_collector/" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    

    

  <h2 id="section">설치 전 준비</h2>

<h3 id="data----">DATA 동기화 및 라이선스 확인</h3>

<p>Collector를 설치하기 전에 실행해야 하는 사항은 다음과 같다.</p>

<p>1.[WIZEYE Builder]에 접속하여, 사이트를 생성해야 한다.
* Collector 설정에서 생성한 사이트의 [라이선스 키] 정보가필요하다.*</p>

<p>2.[WUF]에 접속하여 [Sync To DP]를 실행한다.
* Collector 설치 전 [Sync To DP]는 필수 이다.</p>

<p>[이미지]</p>

<h3 id="host-collector-preinstall">Host Collector Preinstall</h3>

<p>Host Collector를 설치하기 전에 기본적으로 설치해야 하는 프로그램은 다음과 같다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">update</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">net-tools</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">wget</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">zip</span>
<span class="nt">5</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">unzip</span>
</code></pre>
</div>

<h3 id="jvm-collector-preinstall">JVM Collector Preinstall</h3>

<p>JVM Collector를 설치하기 전에 기본적으로 설치해야 하는 프로그램은 다음과 같다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">update</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">net-tools</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">wget</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">zip</span>
<span class="nt">5</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">unzip</span>
<span class="nt">6</span><span class="o">.</span> <span class="nt">yum</span> <span class="nt">install</span> <span class="nt">java-1</span><span class="nc">.7.0-openjdk-devel</span>
<span class="nt">7</span><span class="o">.</span> <span class="nt">type</span> <span class="nt">java</span>
<span class="nt">8</span><span class="o">.</span> <span class="nt">export</span> <span class="nt">JAVA_HOME</span><span class="o">=[</span><span class="nt">JAVA</span> <span class="nt">HOME</span> <span class="nt">PATH</span><span class="o">]</span>
</code></pre>
</div>

<h2 id="hostcollector-">HostCollector 설치</h2>
<p>### HostCollector다운 로드 및 압축 풀기</p>

<p>HostCollector를 설치하는 방법은 다음과 같다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">mkdir</span> <span class="nt">Collector</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">cd</span> <span class="nt">Collector</span><span class="o">/</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">wget</span> <span class="nt">https</span><span class="o">://</span><span class="nt">yum</span><span class="nc">.dockerproject.org</span><span class="o">/</span><span class="nt">repo</span><span class="o">/</span><span class="nt">main</span><span class="o">/</span><span class="nt">centos</span><span class="o">/</span><span class="nt">7</span><span class="o">/</span><span class="nt">Packages</span><span class="o">/</span><span class="nt">docker-engine-1</span><span class="nc">.8.3-1.el7.centos.x86_64.rpm</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">unzip</span> <span class="nt">n3n-host-agent-1</span><span class="nc">.0.12.zip</span> <span class="err">–</span><span class="nt">d</span> <span class="nt">n3n-host-1</span><span class="nc">.0.12</span>
</code></pre>
</div>

<ol>
  <li>Host Collector가 설치되는 디렉터리를 생성한다.</li>
  <li>Collector 디렉터리로 이동한다.</li>
  <li>Host Collector 파일을 다운로드 한다.</li>
  <li>“n3n-host-agent-1.0.12.zip” 파일을 “n3n-host-1.0.12”폴더에 푼다.</li>
</ol>

<h3 id="hostcollector--">HostCollector 설정 변경</h3>

<p>HostCollector를 설정하는 방법은 다음과 같다.
<code class="highlighter-rouge">css
1. cd n3n-host-1.0.12/
2. ls
3. cd conf
4. ls
5. vi host_monitor.config
</code>
1. “n3n-host-1.0.12” 디렉터리로 이동한다.
2. 디렉터리 내 파일 및 디렉토리를 확인 한다.
3. conf 디렉터리로 이동한다.
4. 디렉터리 내에 파일을 확인한다. (host_monitor.config 파일이 있다.)
5. vi 편집기로 “host_monitor.config”의Licensekey, PostURL, HealthcheckRequired의 정보를 환경에 맞도록 변경한다.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
        </span><span class="nt">"authorization"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"licensekey"</span><span class="w"> </span><span class="p">:</span><span class="s2">"ca164c0e2e90923e3664f80d43b35f7314e06c788931dec19381196735dc2b01"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"authentication"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"PostURL"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://172.16.10.45:8090/kafka.php?SrcType=HostMonitoring"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"Userid"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"n3ncollect"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"Password"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"welcome"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"CollectionInterval"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
        </span><span class="nt">"PostTo"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"URL"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"industrytype"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"itsm"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"DaemonModeInLinux"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"Yes"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"FileMode"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Overwrite"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"HealthCheckRequired"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"No"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"HealthCheckURL"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:9000/agentmanager/Host"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"HealthInterval"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
        </span><span class="nt">"DebugLogLevel"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"CRITICAL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<ul>
  <li>Builder에서생성된라이선스키를입력한다.</li>
  <li>n3n-dp-nginx의 IP, Port정보를입력한다</li>
  <li>HealthCheckRequired는 “No”를 입력한다.</li>
</ul>

<h3 id="hostcollector--1">HostCollector 실행하기</h3>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">n3n-host-1</span><span class="nc">.0.12</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">ls</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">python</span> <span class="nt">host-monitor</span><span class="nc">.py</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">ps</span> <span class="nt">ax</span> <span class="o">|</span> <span class="nt">grep</span> <span class="nt">python</span>
</code></pre>
</div>
<ol>
  <li>“n3n-host-1.0.12/bin/” 디렉터리로 이동한다.</li>
  <li>디렉터리 내에 파일을 확인한다.(host-monitor.py파일이 있다.)</li>
  <li>HostCollector를 실행한다.</li>
  <li>HostCollector가 정상적으로 실행 되었는지 확인한다.</li>
</ol>

<h2 id="jvmcollector-">JVMCollector 설치</h2>

<h3 id="jvmcollector----">JVMCollector다운 로드 및 압축 풀기</h3>
<p>JVMCollector를 설치하는 방법은 다음과 같다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">cd</span> <span class="nt">Collector</span><span class="o">/</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">wget</span> <span class="nt">https</span><span class="o">://</span><span class="nt">www</span><span class="nc">.dropbox.com</span><span class="o">/</span><span class="nt">s</span><span class="o">/</span><span class="nt">p6by7xvcyiw6nzz</span><span class="o">/</span><span class="nt">n3n-1</span><span class="nc">.0.12.zip</span> 
<span class="nt">3</span><span class="o">.</span> <span class="nt">python</span> <span class="nt">host-monitor</span><span class="nc">.py</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">ps</span> <span class="nt">ax</span> <span class="o">|</span> <span class="nt">grep</span> <span class="nt">python</span>
</code></pre>
</div>

<ol>
  <li>Collector 디렉터리로 이동한다.</li>
  <li>JVM Collector 파일을 다운로드 한다.</li>
  <li>“n3n-1.0.12.zip ” 파일을 “n3n-jvm-1.0.12”폴더에 푼다.</li>
</ol>

<h3 id="jvmcollector--1">JVMCollector설정 변경</h3>
<p>JVMCollector를 설정하는 방법은 다음과 같다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">cd</span> <span class="nt">n3n-jvm-1</span><span class="nc">.0.12</span><span class="o">/</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">ls</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">cd</span> <span class="nt">conf</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">ls</span>
<span class="nt">5</span><span class="o">.</span> <span class="nt">vi</span> <span class="nt">Agent</span><span class="nc">.properties</span>
</code></pre>
</div>

<ol>
  <li>“n3n-host-1.0.12” 디렉터리로 이동한다.</li>
  <li>디렉터리 내 파일 및 디렉토리를확인한다.</li>
  <li>conf 디렉터리로 이동한다.</li>
  <li>디렉터리 내에 파일을 확인한다. (Agent.properties파일이 있다.)</li>
  <li>vi 편집기로 “Agent.properties의 Licensekey, applicationID, ssl, messageFeed의 정보를 환경에 맞도록 변경한다.</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>n3n.licenseKey = ca164c0e2e90923e3664f80d43b35f7314e06c788931dec19381196735dc2b01
n3n.collectionInterval = 60
n3n.applicationID = N3NSTORE
n3n.ssl = false
n3n.messageFeed = C
</code></pre>
</div>

<ul>
  <li>Builder에서생성된라이선스 키를입력한다.</li>
  <li>앱 이름을 입력한다.</li>
  <li>ssl를사용하지않을경우“False”로설정한다.</li>
</ul>

<h3 id="agent----n3n-agent-1012jar">Agent 설정 변경 및 n3n-agent-1.0.12.jar업데이트</h3>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">cd</span> <span class="o">/</span><span class="nt">n3n-jvm-1</span><span class="nc">.0.12</span><span class="o">/</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">ls</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">unzipn3n-agent-1</span><span class="nc">.0.12.jar</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">vi</span> <span class="nt">GlobalAgent</span><span class="nc">.properties</span>
<span class="nt">5</span><span class="o">.</span> <span class="nt">zip</span> <span class="nt">-u</span> <span class="nt">n3n-agent-1</span><span class="nc">.0.12GlobalAgent.properties</span>
</code></pre>
</div>

<ol>
  <li>“n3n-jvm-1.0.12” 디렉터리로 이동한다.</li>
  <li>디렉터리 내에 파일을 확인한다. (n3n-agent-1.0.12.jar파일이 있다.)</li>
  <li>“n3n-agent-1.0.12.jar”파일 압축 풀기를 실행한다.</li>
  <li>vi 편집기로 “GlobalAgent.properties”내 n3n.hostName을Collector의IP:Port또는Domin정보(ex. - 127.0.0.1:8090 or datacollector.n3nwizeye.com)를환경에맞도록변경한다.</li>
  <li>“n3n-agent-1.0.12.jar”압축파일의  GlobalAgent.properties파일을 업데이트 한다.</li>
</ol>

<p>JVM Collector를 테스트하기 위해서는 다음과 같이 실행한다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">wget</span> <span class="nt">http</span><span class="o">://</span><span class="nt">apache</span><span class="nc">.tt.co.kr</span><span class="o">/</span><span class="nt">tomcat</span><span class="o">/</span><span class="nt">tomcat-8</span><span class="o">/</span><span class="nt">v8</span><span class="nc">.0.32</span><span class="o">/</span><span class="nt">bin</span><span class="o">/</span><span class="nt">apache-tomcat-8</span><span class="nc">.0.32.tar.gz</span> 
<span class="nt">2</span><span class="o">.</span> <span class="nt">gzip</span> <span class="nt">-dapache-tomcat-8</span><span class="nc">.0.32.tar.gz</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">tar</span> <span class="nt">xvfapache-tomcat-8</span><span class="nc">.0.32.tar</span>
<span class="nt">4</span><span class="o">.</span> <span class="nt">vi</span> <span class="nt">catalina</span><span class="nc">.sh</span>
</code></pre>
</div>

<ol>
  <li>tomcat을 다운로드 한다.</li>
  <li>“apache-tomcat-8.0.32”파일 압축풀기를 실행한다.</li>
  <li>“apache-tomcat-8.0.32” 파일을 설치한다.</li>
  <li>vi 편집기에서catalina.sh의 스크립트에 위의 <strong>[Agent 설정 변경 및 n3n-agent-1.0.12.jar 업데이트]</strong>에서 업데이트한 <strong>“n3n-agent-1.0.12.jar”</strong>파일의 경로를 입력한다.<br />
<code class="highlighter-rouge">JAVA_OPTS="$JAVA_OPTS -javaagent:/home/collector/n3n-jvm-1.0.12/n3n-agent-1.0.12.jar"</code></li>
</ol>

<h2 id="collector-">Collector 설정</h2>

<p>Collector를 설치한 후DP와의 연동을 위해Spark 스크립트를 설정한다.
설정이 완료되면 [WUF]에 접속하여 [Sync From DP]를 실행한다.</p>

<h3 id="spark--">Spark 스크립트 변경</h3>

<p>Spark 스크립트를 설정하는 방법은 다음과 같다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">cd</span> <span class="o">/</span><span class="nt">hdd</span><span class="o">/</span><span class="nt">data</span><span class="o">/</span><span class="nt">spark</span>
<span class="nt">2</span><span class="o">.</span> <span class="nt">vi</span> <span class="nt">submit_analytic_job</span><span class="nc">.sh</span>
<span class="nt">3</span><span class="o">.</span> <span class="nt">vi</span> <span class="nt">submit_correlation_job</span><span class="nc">.sh</span>
<span class="nt">4</span><span class="o">.</span> <span class="o">/</span><span class="nt">root</span><span class="o">/</span><span class="nt">exec_correlation_spark_job</span><span class="nc">.sh</span>
</code></pre>
</div>

<ol>
  <li>/hdd/data/spark디렉터리로 이동한다. (해당 경로는 환경에 따라 다를 수 있으며,정확한 경로는 configure_run_docker_compose.sh파일에 설정된 경로를 확인해야 한다.)</li>
  <li>vi 편집기로submit_analytic_job.sh를 아래와 같이 수정한다.</li>
</ol>

<div class="highlighter-rouge"><pre class="highlight"><code>/data/spark/bin/spark-submit \
        --deploy-mode client \
        --driver-cores 2 \
        --driver-memory 2G \
        --executor-memory 2G \
        --driver-class-path /data/spark/apps/n3n-analytic-1.0-jar-with-dependencies.jar \
        --class com.n3n.itsm.analytic.RawEventsProcess \
        /data/spark/apps/n3n-analytic-1.0.jar $*
</code></pre>
</div>

<p><code class="highlighter-rouge">class com.n3n.itsm.analytic.RawEventsBizNowProcess를 class com.n3n.itsm.analytic.RawEventsProcess로 변경한다.</code></p>

<p>3.vi 편집기로submit_correlation_job.sh를 아래와 같이 수정한다.
- JVM Collector와 Host Collect와 연동을 위해 jvmEvents와 hostEvents Topic을 추가 한다.(위 설정 정보는 Collector와 관련된 Topic으로,필요한 경우 추가 한다.)</p>

<div class="highlighter-rouge"><pre class="highlight"><code>corr_class=com.n3n.itsm.event.client.Client
fori in `ps -ef|grep ${corr_class}|grep -v grep|awk '{print $2}'` ; do
kill ${i}
done
/data/spark/bin/spark-submit \
        --deploy-mode client \
        --driver-cores 2 \
        --driver-memory 3G \
        --executor-memory 3G \
        --driver-class-path /data/spark/apps/n3n-correlation-1.0-jar-with-dependencies.jar \
        --class ${corr_class} \
        /data/spark/apps/n3n-correlation-1.0.jar jvmEventshostEventslogEvents
</code></pre>
</div>

<p>4.수정사항이 반영되도록 스크립트를 실행한다.</p>

<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">1</span><span class="o">.</span> <span class="nt">crontab</span> <span class="nt">-l</span>
<span class="nt">2</span><span class="o">.</span> <span class="o">/</span><span class="nt">root</span><span class="o">/</span><span class="nt">exec_correlation_spark_job</span><span class="nc">.sh</span>
</code></pre>
</div>

<ol>
  <li>Crontab스케쥴 정보를 조회한다.</li>
  <li>/root/exec_correlation_spark_job.sh는 1시간 마다 실행되므로,수동으로 실행해준다.( /root/exec_analytic_spark_job.sh는 2분 마다 실행되므로 수동으로 실행 하지 않는다.)</li>
</ol>



<div class="tags">
    
</div>

    

</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 company. All rights reserved. <br />
<p>Page last updated:</span> March 20, 2016<br/> Site last generated: Jun 27, 2016 <br />
<p><img src="/documentation-theme-jekyll/images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>

    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>
    <script>
    jQuery(function ($) {
        $('.post-content').annotator()
                .annotator('setupPlugins', {tokenUrl: 'http://example.com/api/token'})
    });
    </script>
</body>

</html>